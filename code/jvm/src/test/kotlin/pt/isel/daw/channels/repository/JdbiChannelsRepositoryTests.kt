package pt.isel.daw.channels.repository

class JdbiChannelsRepositoryTests {
    /*
    @Test
    fun `can create and retrieve user`() =
        runWithHandle { handle ->
            // given: a UsersRepository
            val repo = JdbiChannelsRepository(handle)

            // when: storing a user
            val passwordValidationInfo = PasswordValidationInfo(newTokenValidationData())
            val userName = User(1, "carolina@gmail.com", "carol", passwordValidationInfo)
            val channel = ChannelModel(userName, "ch1", "no rules", Type.PUBLIC)
            val chID = repo.createChannel(channel)


        }

    companion object {
        private fun runWithHandle(block: (Handle) -> Unit) = jdbi.useTransaction<Exception>(block)

        private fun newTestUserName() = "user-${abs(Random.nextLong())}"

        private fun newTokenValidationData() = "token-${abs(Random.nextLong())}"

        private val jdbi =
            Jdbi.create(
                PGSimpleDataSource().apply {
                    setURL(Environment.getDbUrl())
                },
            ).configureWithAppRequirements()
    }

     */
}